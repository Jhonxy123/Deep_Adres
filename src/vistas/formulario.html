<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de Reclamación</title>
  <link rel="stylesheet" href="css/formulario.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="layout"></div>
  <main>

   
    <form class="formulario" method="POST" action="/formulario">
       <h2>I. Datos del beneficiario de la reclamación</h2>
      <div class="fila">
        <input type="text" name="beneficiario.primer_apellido" placeholder="Primer Apellido">
        <input type="text" name="beneficiario.segundo_apellido" placeholder="Segundo Apellido">
      </div>

      <div class="fila">
        <input type="text" name="beneficiario.primer_nombre" placeholder="Primer Nombre">
        <input type="text" name="beneficiario.segundo_nombre" placeholder="Segundo Nombre">
      </div>

      <div class="fila">
        <select name="beneficiario.tipo_documento">
          <option value="">Tipo de documento</option>
          <option value="Cédula">Cédula</option>
          <option value="Pasaporte">Pasaporte</option>
        </select>
      
        <input type="text" name="beneficiario.numero_documento" placeholder="No. de documento">
      </div>
      
      <div class="fila">
        <label>Dirección de domicilio:</label>
        <input type="text" name="beneficiario.direccion">
      </div>
      
      <div class="fila">
        <label>Correo electrónico:</label>
        <input type="email" name="beneficiario.correo">
      </div>

      <div class="fila">
        <label>Departamento:</label>
        <select id="beneficiario.departamento" name="beneficiario.departamento">
          <option value="">-- Cargando... --</option>
        </select>

        <label>Teléfono:</label>
        <input type="text" name="beneficiario.telefono">
      </div>

      <div class="fila">
        <label>Municipio:</label>
        <input type="text" name="beneficiario.municipio">

        <label>Celular:</label>
        <input type="text" name="beneficiario.celular">
      </div>

      <div class="fila">
        <label>Cuenta bancaria:</label>
        <input type="text" name="beneficiario.cuenta_bancaria">
      </div>

      <div class="fila">
        <label>Banco:</label>
        <input type="text" name="beneficiario.banco">

        <label>Tipo de cuenta:</label>
        <input type="text" name="beneficiario.tipo_cuenta">
      </div>

      <div class="fila">
        <label>parentesco con la victima:</label>
        <select name="parentesco.tipo_victima">
            <option value="Madre">Madre</option>
            <option value="Padre">Padre</option>
            <option value="Hermano">Hermano</option>
            <option value="Tio">Tio</option>
             <option value="Conyugue">Conyugue</option>
              <option value="Hijo">Hijo</option>
              <option value="Machete">Machete</option>
        </select>
    </div>

    <hr>
    <h2>II. Datos del apoderado (abogado con poder para tramitar la reclamación)</h2>

    <div class="fila">
        <input type="text" name="apoderado.primer_apellido" placeholder="Primer Apellido">
        <input type="text" name="apoderado.segundo_apellido" placeholder="Segundo Apellido">
    </div>

    <div class="fila">
        <input type="text" name="apoderado.primer_nombre" placeholder="Primer Nombre">
        <input type="text" name="apoderado.segundo_nombre" placeholder="Segundo Nombre">
    </div>

    <div class="fila">
        <select name="apoderado.tipo_documento">
            <option value="">Tipo de documento</option>
            <option value="Cédula">Cédula</option>
            <option value="Pasaporte">Pasaporte</option>
        </select>
        <input type="text" name="apoderado.numero_documento" placeholder="No. de documento">
    </div>

    <div class="fila">
        <label>Dirección:</label>
        <input type="text" name="apoderado.direccion">
    </div>

    <div class="fila">
        <label>Correo electrónico:</label>
        <input type="email" name="apoderado.correo">
    </div>

    <div class="fila">
        <label>Departamento:</label>
        <input type="text" name="apoderado.departamento">
        <label>Teléfono:</label>
        <input type="text" name="apoderado.telefono">
    </div>

    <div class="fila">
        <label>Municipio:</label>
        <input type="text" name="apoderado.municipio">
        <label>Tarjeta Profesional:</label>
        <input type="text" name="apoderado.tarjeta_profesional">
    </div>

    <hr>
    <h2>III. Datos de la víctima del evento catastrófico o accidente de tránsito</h2>

    <div class="fila">
        <input type="text" name="victima.primer_apellido" placeholder="Primer Apellido">
        <input type="text" name="victima.segundo_apellido" placeholder="Segundo Apellido">
    </div>

    <div class="fila">
        <input type="text" name="victima.primer_nombre" placeholder="Primer Nombre">
        <input type="text" name="victima.segundo_nombre" placeholder="Segundo Nombre">
    </div>

    <div class="fila">
        <select name="victima.tipo_documento">
            <option value="">Tipo de documento</option>
            <option value="Cédula">Cédula</option>
            <option value="Pasaporte">Pasaporte</option>
        </select>
        <input type="text" name="victima.numero_documento" placeholder="No. de documento">
    </div>

    <div class="fila">
        <label>Fecha de nacimiento:</label>
        <input type="date" name="victima.fecha_nacimiento">
        <label>Sexo:</label>
        <select name="victima.sexo">
            <option value="">Seleccione</option>
            <option value="Masculino">Masculino</option>
            <option value="Femenino">Femenino</option>
            <option value="Otro">Otro</option>
        </select>
    </div>

    <div class="fila">
        <label>Dirección de domicilio:</label>
        <input type="text" name="victima.direccion">
    </div>

    <div class="fila">
        <label>Departamento:</label>
        <input type="text" name="victima.departamento">
        <label>Municipio:</label>
        <input type="text" name="victima.municipio">
    </div>

    <div class="fila">
        <label>Zona:</label>
        <select name="victima.zona">
            <option value="Urbana">Urbana</option>
            <option value="Rural">Rural</option>
        </select>
        <label>Condición del accidentado:</label>
        <select name="victima.condicion">
            <option value="">Seleccione</option>
            <option value="Lesionado">Lesionado</option>
            <option value="Fallecido">Fallecido</option>
        </select>
    </div>

    <div class="fila">
        <label>Teléfono:</label>
        <input type="text" name="victima.telefono">
        <label>Fecha en caso de muerte:</label>
        <input type="date" name="victima.fecha_muerte">
    </div>

    <hr>
    <h2>IV. Datos del sitio donde ocurrió el evento catastrófico o accidente de tránsito</h2>

    <p><strong>Naturaleza del evento</strong></p>

    <div class="fila">
        <label>Naturales:</label>
        <select name="evento.natural">
            <option value="Ninguno">Ninguno</option>
            <option value="Sismo">Sismo</option>
            <option value="Inundación">Inundación</option>
            <option value="Deslizamiento">Deslizamiento</option>
        </select>

        <label>Terroristas:</label>
        <select name="evento.terrorista">
            <option value="Ninguno">Ninguno</option>
            <option value="Atentado">Atentado</option>
            <option value="Explosivo">Explosivo</option>
        </select>
    </div>

    <div class="fila">
        <label>Accidente de tránsito:</label>
        <input type="checkbox" name="evento.accidente_transito" value="true">

        <label>Otros:</label>
        <input type="checkbox" name="evento.otro" value="true">
        <label>Cuál:</label>
        <input type="text" name="evento.otro_descripcion" placeholder="Especificar otro tipo de evento">
    </div>

    <div class="fila">
        <label>Dirección de la ocurrencia:</label>
        <input type="text" name="evento.direccion">
    </div>

    <div class="fila">
        <label>Fecha evento/accidente:</label>
        <input type="date" name="evento.fecha">
        <label>Hora:</label>
        <input type="time" name="evento.hora" step="1">
    </div>

    <div class="fila">
        <label>Departamento:</label>
        <input type="text" name="evento.departamento">
        <label>Municipio:</label>
        <input type="text" name="evento.municipio">
    </div>

    <div class="fila">
        <p><strong>Descripción breve del evento catastrófico o accidente de tránsito</strong></p>
        <p>Enuncie las principales características del evento / accidente:</p>
        <textarea rows="5" style="width: 100%; border-radius: 10px;" name="evento.descripcion"></textarea>
    </div>

    <hr>
    <h2>V. Información del vehículo del accidente de tránsito</h2>

    <div class="fila">
      <label>Estado de aseguramiento:</label>
      <select name="vehiculo.aseguramiento">
        <option value="">Seleccione...</option>
        <option value="asegurado">Asegurado</option>
        <option value="no_asegurado">No asegurado</option>
      </select>
    </div>

    <div class="fila">
      <label>Marca:</label>
      <input type="text" name="vehiculo.marca">
      
      <label>Placa:</label>
      <input type="text" name="vehiculo.placa">
    </div>

    <div class="fila">
      <label>Tipo de servicio:</label>
      <select name="vehiculo.tipo_servicio">
        <option value="">Seleccione...</option>
        <option value="publico">Público</option>
        <option value="particular">Particular</option>
        <option value="oficial">Oficial</option>
      </select>

      <label>Intervención de la autoridad:</label>
      <select name="vehiculo.intervencion_autoridad">
        <option value="">Seleccione...</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>

    <div class="fila">
      <label>Nombre de la aseguradora:</label>
      <input type="text" name="vehiculo.aseguradora">
    </div>

    <div class="fila">
      <label>Número de la póliza:</label>
      <input type="text" name="vehiculo.numero_poliza">
    </div>

    <div class="fila">
      <label>Vigencia desde:</label>
      <input type="date" name="vehiculo.vigencia_desde">

      <label>hasta:</label>
      <input type="date" name="vehiculo.vigencia_hasta">
    </div>

    <hr>
    <h2>VI. Datos del propietario del vehículo</h2>

    <div class="fila">
      <input type="text" name="propietario.primer_apellido" placeholder="Primer Apellido">
      <input type="text" name="propietario.segundo_apellido" placeholder="Segundo Apellido">
    </div>

    <div class="fila">
      <input type="text" name="propietario.primer_nombre" placeholder="Primer Nombre">
      <input type="text" name="propietario.segundo_nombre" placeholder="Segundo Nombre">
    </div>

    <div class="fila">
      <select name="propietario.tipo_documento">
        <option value="">Tipo de documento</option>
        <option value="cc">Cédula de ciudadanía</option>
        <option value="ti">Tarjeta de identidad</option>
        <option value="ce">Cédula de extranjería</option>
        <option value="pasaporte">Pasaporte</option>
      </select>
      <input type="text" name="propietario.numero_documento" placeholder="No. de documento">
    </div>

    <div class="fila">
      <label>Dirección de domicilio:</label>
      <input type="text" name="propietario.direccion">
    </div>

    <div class="fila">
      <label>Departamento:</label>
      <input type="text" name="propietario.departamento">

      <label>Teléfono o celular:</label>
      <input type="tel" name="propietario.telefono">
    </div>

    <div class="fila">
      <label>Municipio:</label>
      <input type="text" name="propietario.municipio">
    </div>

    <hr>
    <h2>VII. Datos del conductor del vehículo</h2>

    <div class="fila">
      <input type="text" name="conductor.primer_apellido" placeholder="Primer Apellido">
      <input type="text" name="conductor.segundo_apellido" placeholder="Segundo Apellido">
    </div>

    <div class="fila">
      <input type="text" name="conductor.primer_nombre" placeholder="Primer Nombre">
      <input type="text" name="conductor.segundo_nombre" placeholder="Segundo Nombre">
    </div>

    <div class="fila">
      <select name="conductor.tipo_documento">
        <option value="">Tipo de documento</option>
        <option value="cc">Cédula de ciudadanía</option>
        <option value="ti">Tarjeta de identidad</option>
        <option value="ce">Cédula de extranjería</option>
        <option value="pasaporte">Pasaporte</option>
      </select>
      <input type="text" name="conductor.numero_documento" placeholder="No. de documento">
    </div>

    <div class="fila">
      <label>Dirección de domicilio:</label>
      <input type="text" name="conductor.direccion">
    </div>

    <div class="fila">
      <label>Departamento:</label>
      <input type="text" name="conductor.departamento">
      <label>Teléfono o celular:</label>
      <input type="tel" name="conductor.telefono">
    </div>

    <div class="fila">
      <label>Municipio:</label>
      <input type="text" name="conductor.municipio">
    </div>

    <hr>
    <h2>VIII. Amparos que reclama</h2>

    <div class="fila">
      <label>Concepto reclamado:</label>
      <select name="reclamacion.concepto">
        <option value="">Seleccione...</option>
        <option value="indemnizacion">Indemnización por muerte y Gastos funerarios</option>
        <option value="gastos_medicos">Gastos médicos</option>
        <option value="rehabilitacion">Rehabilitación</option>
      </select>
    </div>

    <div class="fila">
      <label>Valor:</label>
      <input type="number" name="reclamacion.valor" placeholder="$">
    </div>
    
    <div class="actions" style="margin-top: 20px;">
      <button type="submit" id="btn-enviar" class="btn btn-enviar" style="background-color: #0057ff; color: white;">Enviar</button>
      <button type="button" id="btn-volver" class="btn btn-volver" onclick="window.history.back()" style="background-color: #222; color: white; margin-left: 10px;">Volver</button>
    </div>
  
  </form>
</main>
 <script src="componentes_html/cargarcomponentes.js"></script>

  <script>
    cargarComponente("#layout", "componentes_html/layout_user.html");
  </script>

<script type="module">

  import indemnizacionDAO from '../modelo/DAO_indemnizacion.js';


  document.addEventListener('DOMContentLoaded', async () => {
    const select = document.getElementById('beneficiario.departamento');

    try {
      const departamentos = await indemnizacionDAO.traerDepartamentos();
      select.innerHTML = '<option value="">-- Selecciona --</option>';

      departamentos.forEach(element => {
        const option = document.createElement('option');
        option.value = element.id;
        option.textContent = element.departamento;
        select.appendChild(option);
      });
    } catch (error) {
      console.error('Error al cargar departamentos:', error);
      select.innerHTML = '<option value="">Error al cargar datos</option>';
    }
  });
</script>

</body>
</html>